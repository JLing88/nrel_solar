<h2 class="text-center"><%= @property_result.address %></h2>


<table class="table table-hover table-sm">
  <tbody>
    <tr class="table-success">
      <th scope='col'>Number of Electric Charging Stations within 3 miles: <%= @property_result.station_count %></th>
    </tr>
    <tr class="table-success">
      <th scope='col'>Percentage of Energy Covered with Solar: <%= @property_result.ac_coverage.round %>%</th>
    </tr>
    <tr class="table-success">
      <th scope='col'>Green Score: <%= @property_result.green_score %> / 10</th>
    </tr>
  </tbody>
</table>
 <!--The div element for the map -->
 <div id="map"></div>
 <script>
 function initMap() {
   var coordinates = {lat: <%= @property_result.latitude %>, lng: <%= @property_result.longitude %>};
   var map = new google.maps.Map(
       document.getElementById('map'), {zoom: 12, center: coordinates});
   var marker = new google.maps.Marker({position: coordinates, map: map});
  <% @stations.each do |station|  %>

     var position = new google.maps.LatLng(<%= station.latitude %>, <%= station.longitude %>);
     marker = new google.maps.Marker({
       position: position,
       map: map,
       title: <%= station.name.to_json.html_safe %>
     });
  <% end %>
 }
 </script>

 <script async defer
 src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_API_KEY'] %>&callback=initMap">
 </script>
